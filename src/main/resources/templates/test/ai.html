<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–ò - –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
        }
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .btn {
            border-radius: 8px;
            font-weight: 500;
        }
        .alert {
            border-radius: 12px;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–ò (LM Studio)</h1>
                
                <!-- –°—Ç–∞—Ç—É—Å API -->
                <div class="alert" th:classappend="${available} ? 'alert-success' : (${configured} ? 'alert-warning' : 'alert-danger')">
                    <h5 th:if="${available}">‚úÖ LM Studio –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç</h5>
                    <h5 th:if="${configured and !available}">‚ö†Ô∏è LM Studio –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</h5>
                    <h5 th:if="${!configured}">‚ùå LM Studio –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</h5>
                    
                    <p th:if="${available}">
                        API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: <code>http://localhost:1234/v1</code><br>
                        <span th:if="${models != null and !models.empty}">
                            –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: <strong th:text="${#strings.listJoin(models, ', ')}"></strong>
                        </span>
                    </p>
                    <p th:if="${configured and !available}">
                        –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ LM Studio –∑–∞–ø—É—â–µ–Ω –∏ —Å–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω.<br>
                        <small>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.</small>
                    </p>
                    <p th:if="${!configured}">
                        –í–∫–ª—é—á–∏—Ç–µ LM Studio –≤ <code>application.yml</code>: <code>app.lmstudio.enabled: true</code>
                    </p>
                </div>

                <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ -->
                <div th:if="${!available}" class="alert alert-info">
                    <h5>üìñ –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å LM Studio:</h5>
                    <ol>
                        <li>–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ <a href="https://lmstudio.ai/" target="_blank">LM Studio</a></li>
                        <li>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: Qwen2.5-7B, Mistral-7B –∏–ª–∏ Llama-3.1-8B)</li>
                        <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ LM Studio (–≤–∫–ª–∞–¥–∫–∞ "Local Server")</li>
                        <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ <code>http://localhost:1234</code></li>
                        <li>–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</li>
                    </ol>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
                <div th:if="${result}" class="alert" th:classappend="${success} ? 'alert-success' : 'alert-danger'">
                    <h5 th:if="${success}">‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:</h5>
                    <h5 th:unless="${success}">‚ùå –û—à–∏–±–∫–∞:</h5>
                    <p th:text="${result}"></p>
                </div>

                <div class="row">
                    <!-- –¢–µ—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>üìÇ –¢–µ—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏</h5>
                            </div>
                            <div class="card-body">
                                <form th:action="@{/test/categorize}" method="post">
                                    <div class="mb-3">
                                        <label for="title" class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏:</label>
                                        <input type="text" class="form-control" id="title" name="title" 
                                               th:value="${title}" 
                                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏">
                                    </div>
                                    <div class="mb-3">
                                        <label for="content1" class="form-label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:</label>
                                        <textarea class="form-control" id="content1" name="content" rows="4" 
                                                  th:text="${content}"
                                                  placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏..."></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">üîç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- –¢–µ—Å—Ç —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>üìù –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–≤–æ–¥–∫–∏</h5>
                            </div>
                            <div class="card-body">
                                <form th:action="@{/test/summarize}" method="post">
                                    <div class="mb-3">
                                        <label for="content2" class="form-label">–¢–µ–∫—Å—Ç –¥–ª—è —Å–≤–æ–¥–∫–∏:</label>
                                        <textarea class="form-control" id="content2" name="content" rows="6" 
                                                  th:text="${content}"
                                                  placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–∏..."></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-success">‚ú® –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–¥–∫—É</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>üí° –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <h6>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</h6>
                                        <small class="text-muted">
                                            "–ù–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ JavaScript –ø–æ–∫–∞–∑–∞–ª –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."
                                        </small>
                                    </div>
                                    <div class="col-md-4">
                                        <h6>–°–ø–æ—Ä—Ç:</h6>
                                        <small class="text-muted">
                                            "–§—É—Ç–±–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –æ–¥–µ—Ä–∂–∞–ª–∞ –ø–æ–±–µ–¥—É –≤ —á–µ–º–ø–∏–æ–Ω–∞—Ç–µ –º–∏—Ä–∞ 2026 –≥–æ–¥–∞, –æ–±—ã–≥—Ä–∞–≤ —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ —Å–æ —Å—á–µ—Ç–æ–º 3:1."
                                        </small>
                                    </div>
                                    <div class="col-md-4">
                                        <h6>–≠–∫–æ–Ω–æ–º–∏–∫–∞:</h6>
                                        <small class="text-muted">
                                            "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–∏ –Ω–∞ 0.5% –¥–ª—è –±–æ—Ä—å–±—ã —Å –∏–Ω—Ñ–ª—è—Ü–∏–µ–π."
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
                <div class="mt-4">
                    <a th:href="@{/admin/dashboard}" class="btn btn-secondary">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∞–¥–º–∏–Ω–∫—É</a>
                    <a th:href="@{/}" class="btn btn-outline-primary">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>